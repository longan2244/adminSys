"use strict";(self["webpackChunkadminsys"]=self["webpackChunkadminsys"]||[]).push([[659],{8659:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"goods_params-container"},[e("el-card",[e("el-alert",{attrs:{title:"注意：只能选中三级目录修改","show-icon":"",type:"warning"}}),e("br"),e("el-cascader",{attrs:{options:t.cateList,props:t.Props},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e("el-tabs",{on:{"tab-click":t.tabonClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-button",{on:{click:t.addattributedilog}},[t._v(t._s(t.isattribute))]),e("el-tab-pane",{attrs:{disabled:!(t.value.length>=3),label:"动态参数many",name:"many"}},[e("el-table",{attrs:{data:t.manydata,width:"100%"}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("div",[t._l(a.attr_vals.split(" "),(function(a,i){return e("el-tag",{key:i,attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.handleClose(a)}}},[t._v(" "+t._s(a)+" ")])})),t.inputVisible?e("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(e){return t.handleInputConfirm(a)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(a)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):e("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2)]}}])}),e("el-table-column",{attrs:{type:"index",width:"auto"}}),e("el-table-column",{attrs:{prop:"attr_name",label:"参数名称",width:"auto"}}),e("el-table-column",{attrs:{label:"操作",width:"auto"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("div",[e("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("编辑")]),e("el-button",{attrs:{type:"success",size:"mini"}},[t._v("删除")])],1)]}}])})],1)],1),e("el-tab-pane",{attrs:{disabled:!(t.value.length>=3),label:"静态参数only",name:"only"}},[e("span",[t._v("only")]),e("el-table",{attrs:{data:t.onlydata,width:"100%"}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("div",[t._v(" "+t._s(a)+" ")])]}}])}),e("el-table-column",{attrs:{type:"index",width:"auto"}}),e("el-table-column",{attrs:{prop:"attr_name",label:"属性名称",width:"auto"}}),e("el-table-column",{attrs:{label:"操作",width:"auto"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("div",[e("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("编辑")]),e("el-button",{attrs:{type:"success",size:"mini"}},[t._v("删除")])],1)]}}])})],1)],1)],1)],1),e("el-dialog",{attrs:{title:t.isattribute,visible:t.attribute_Visible,width:"50%"},on:{"update:visible":function(e){t.attribute_Visible=e}}},[e("el-form",{ref:"attributeform",attrs:{model:t.addattributeinfo,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"添加"}},[e("el-input",{model:{value:t.addattributeinfo.attr_name,callback:function(e){t.$set(t.addattributeinfo,"attr_name",e)},expression:"addattributeinfo.attr_name"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addattribute}},[t._v("确 定")])],1)],1)],1)},n=[],l=a(886),s=a(8365);function r(t,e={}){return(0,s.Z)({method:"get",url:`categories/${t}/attributes`,params:e})}function u(t,e){return(0,s.Z)({method:"post",url:`categories/${t}/attributes`,data:e})}var o={components:{},name:"only",props:[],data(){return{attribute_Visible:!1,activeName:"many",inputVisible:!1,inputValue:"",cateList:[],value:[],Props:{label:"cat_name",value:"cat_id",children:"children"},manydata:[],onlydata:[],addattributeinfo:{id:"",attr_name:"",attr_sel:""}}},methods:{showInput(){this.inputVisible=!0,this.$nextTick((()=>{this.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm(t){console.log(t,this.inputValue)},addattributedilog(){this.attribute_Visible=!this.attribute_Visible},async addattribute(){try{await u(this.addattributeinfo.id,this.addattributeinfo);this.handleChange(),this.attribute_Visible=!1}catch(t){console.log(t)}},tabonClick(){this.handleChange()},async handleChange(){if(3!=this.value.length)return this.$message.error("只能选中三级目录");let t=await r(this.value[this.value.length-1],{sel:this.activeName});"many"==this.activeName?this.manydata=t:this.onlydata=t},async getcateList(){try{this.cateList=await(0,l.c5)()}catch(t){}}},computed:{isattribute(){return this.addattributeinfo.id=this.value[this.value.length-1],this.addattributeinfo.attr_sel=this.activeName,"many"==this.activeName?"添加动态属性":"添加静态参数"}},watch:{},created(){this.getcateList()},mounted(){}},c=o,d=a(1001),b=(0,d.Z)(c,i,n,!1,null,null,null),h=b.exports},886:function(t,e,a){a.d(e,{Tj:function(){return l},c5:function(){return n},xu:function(){return s}});var i=a(8365);function n(t={}){return(0,i.Z)({method:"GET",url:"/categories",params:t})}function l(t){return(0,i.Z)({method:"post",url:"/categories",data:t})}function s(t){return(0,i.Z)({method:"delete",url:`/categories/${t}`})}}}]);
//# sourceMappingURL=659.14b3b50e.js.map